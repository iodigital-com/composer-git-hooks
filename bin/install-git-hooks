#!/usr/bin/env php
<?php

declare(strict_types=1);

use ISAAC\ComposerGitHooks\FileSystem;
use ISAAC\ComposerGitHooks\GitHooks;
use ISAAC\ComposerGitHooks\StdLogger;

const AUTOLOAD_PATHS = [
    __DIR__ . '/vendor/autoload.php',
    __DIR__ . '/../vendor/autoload.php',
    __DIR__ . '/../autoload.php',
    __DIR__ . '/../../autoload.php',
    __DIR__ . '/../../../autoload.php',
    __DIR__ . '/../../../../autoload.php',
];

$autoloadPath = null;
foreach (AUTOLOAD_PATHS as $path) {
    if (file_exists($path)) {
        $autoloadPath = $path;
        break;
    }
}

if (!$autoloadPath) {
    echo 'Autoload file not found';
    exit(1);
}

require_once $autoloadPath;
$logger = new StdLogger();
$fileSystem = new FileSystem($logger);
$gitHooks = new GitHooks($logger, $fileSystem);
$gitHooks->install();
